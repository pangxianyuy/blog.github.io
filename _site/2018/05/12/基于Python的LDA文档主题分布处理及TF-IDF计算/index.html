<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
    <meta name="description" content="">
    <meta name="keywords"  content="孙长智, 阿扎提路的贝斯手, MalcolmSuen, 孙长智的博客, Malcolm`s Blog, 博客, 个人网站, 信息安全, 网络空间安全, 互联网, Web, JavaScript, 前端, 新疆大学">
    <meta name="theme-color" content="#000000">
    
    <!-- Open Graph -->
    <meta property="og:title" content="基于Python的LDA文档主题分布处理及TF-IDF计算 - Malcolm的博客 | Malcolm Blog">
    
    <meta property="og:type" content="article">
    <meta property="og:description" content="什么是LDA？

">
    
    <meta property="article:published_time" content="2018-05-12T00:00:00Z">
    
    
    <meta property="article:author" content="Malcolm Suen">
    
    
    <meta property="article:tag" content="Python">
    
    <meta property="article:tag" content="机器学习">
    
    <meta property="article:tag" content="LDA">
    
    
    <meta property="og:image" content="http://localhost:4000/img/avatar.jpg">
    <meta property="og:url" content="http://localhost:4000/2018/05/12/%E5%9F%BA%E4%BA%8EPython%E7%9A%84LDA%E6%96%87%E6%A1%A3%E4%B8%BB%E9%A2%98%E5%88%86%E5%B8%83%E5%A4%84%E7%90%86%E5%8F%8ATF-IDF%E8%AE%A1%E7%AE%97/">
    <meta property="og:site_name" content="Malcolm的博客 | Malcolm Blog">
    
    <title>基于Python的LDA文档主题分布处理及TF-IDF计算 - Malcolm的博客 | Malcolm Blog</title>

    <!-- Web App Manifest -->
    <link rel="manifest" href="/pwa/manifest.json">

    <!-- Favicon -->
    <link rel="shortcut icon" href="/img/favicon.ico">
    
    <!-- Canonical URL -->
    <link rel="canonical" href="http://localhost:4000/2018/05/12/%E5%9F%BA%E4%BA%8EPython%E7%9A%84LDA%E6%96%87%E6%A1%A3%E4%B8%BB%E9%A2%98%E5%88%86%E5%B8%83%E5%A4%84%E7%90%86%E5%8F%8ATF-IDF%E8%AE%A1%E7%AE%97/">

    <!-- Bootstrap Core CSS -->
    <link rel="stylesheet" href="/css/bootstrap.min.css">

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/hux-blog.min.css">

    <!-- Custom Fonts -->
    <!-- <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet" type="text/css"> -->
    <!-- Hux change font-awesome CDN to qiniu -->
    <link href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css">


    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <!-- ga & ba script hoook -->
    <script></script>
</head>


<!-- hack iOS CSS :active style -->
<body ontouchstart="">

    <!-- Navigation -->

<nav class="navbar navbar-default navbar-custom navbar-fixed-top">

    <div class="container-fluid">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header page-scroll">
            <button type="button" class="navbar-toggle">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/">Malcolm`s Blog</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div id="huxblog_navbar">
            <div class="navbar-collapse">
                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <a href="/">Home</a>
                    </li>
                    <li>
                        <a href="/archive">archive</a>
                    </li>
                    <li>
                        <a href="/about">About</a>
                    </li>
                    
<!--                    -->
<!--                    -->
<!--                    -->
<!--                    -->
<!--                    <li>-->
<!--                        <a href="/about/">About</a>-->
<!--                    </li>-->
<!--                    -->
<!--                    -->
<!--                    -->
<!--                    <li>-->
<!--                        <a href="/archive/">Archive</a>-->
<!--                    </li>-->
<!--                    -->
<!--                    -->
<!--                    -->
<!--                    -->
<!--                    -->
<!--                    -->
<!--                    -->
<!--                    -->
                </ul>
            </div>
        </div>
        <!-- /.navbar-collapse -->
    </div>
    <!-- /.container -->
</nav>
<script>
    // Drop Bootstarp low-performance Navbar
    // Use customize navbar with high-quality material design animation
    // in high-perf jank-free CSS3 implementation
    var $body   = document.body;
    var $toggle = document.querySelector('.navbar-toggle');
    var $navbar = document.querySelector('#huxblog_navbar');
    var $collapse = document.querySelector('.navbar-collapse');

    var __HuxNav__ = {
        close: function(){
            $navbar.className = " ";
            // wait until animation end.
            setTimeout(function(){
                // prevent frequently toggle
                if($navbar.className.indexOf('in') < 0) {
                    $collapse.style.height = "0px"
                }
            },400)
        },
        open: function(){
            $collapse.style.height = "auto"
            $navbar.className += " in";
        }
    }

    // Bind Event
    $toggle.addEventListener('click', function(e){
        if ($navbar.className.indexOf('in') > 0) {
            __HuxNav__.close()
        }else{
            __HuxNav__.open()
        }
    })

    /**
     * Since Fastclick is used to delegate 'touchstart' globally
     * to hack 300ms delay in iOS by performing a fake 'click',
     * Using 'e.stopPropagation' to stop 'touchstart' event from 
     * $toggle/$collapse will break global delegation.
     * 
     * Instead, we use a 'e.target' filter to prevent handler
     * added to document close HuxNav.  
     *
     * Also, we use 'click' instead of 'touchstart' as compromise
     */
    document.addEventListener('click', function(e){
        if(e.target == $toggle) return;
        if(e.target.className == 'icon-bar') return;
        __HuxNav__.close();
    })
</script>


    <!-- Image to hack wechat -->
<!-- <img src="/img/icon_wechat.png" width="0" height="0"> -->
<!-- <img src="/img/post-bg-2015.jpg" width="0" height="0"> -->

<!-- Post Header -->



<style type="text/css">
    header.intro-header{
        position: relative;
        background-image: url('/img/post-bg-2015.jpg');
        background: ;
    }

    
    header.intro-header .header-mask{
        width: 100%;
        height: 100%;
        position: absolute;
        background: rgba(0,0,0, 0.3);
    }
    
</style>

<header class="intro-header" >

    <div class="header-mask"></div>
    
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <div class="post-heading">
                    <div class="tags">
                        
                        <a class="tag" href="/archive/?tag=Python" title="Python">Python</a>
                        
                        <a class="tag" href="/archive/?tag=%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0" title="机器学习">机器学习</a>
                        
                        <a class="tag" href="/archive/?tag=LDA" title="LDA">LDA</a>
                        
                    </div>
                    <h1>基于Python的LDA文档主题分布处理及TF-IDF计算</h1>
                    
                    <h2 class="subheading">这篇文章主要是讲述如何通过LDA处理文本内容TXT，并计算其文档主题分布及TF-IDF。</h2>
                    <span class="meta">Posted by Malcolm Suen on May 12, 2018</span>
                </div>
            </div>
        </div>
    </div>
</header>






<!-- Post Content -->
<article>
    <div class="container">
        <div class="row">

    <!-- Post Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                post-container">

                <!-- Multi-Lingual -->
                

				<h2 id="什么是lda">什么是LDA？</h2>

<p>​	隐含狄利克雷分布（Latent Dirichlet Allocation）是一种文档主题生成模型，也称为一个三层贝叶斯概率模型，包含词、主题和文档三层结构。所谓生成模型，就是说，我们认为一篇文章的每个词都是通过“以一定概率选择了某个主题，并从这个主题中以一定概率选择某个词语”这样一个过程得到。文档到主题服从多项式分布，主题到词服从多项式分布。LDA是一种非监督机器学习技术，可以用来识别大规模文档集（document collection）或语料库（corpus）中潜藏的主题信息。</p>

<h2 id="环境配置">环境配置</h2>

<p>下面核心代码里面需要的包都可以用<code class="highlighter-rouge">pip install</code>命令来安装，需要注意的是lda包安装需要10.0以上版本的pip。推荐使用Anaconda进行包管理，详情参见文章《<a href="https://belikovvv.github.io/2018/01/14/Anaconda%E5%85%A5%E9%97%A8%E6%8C%87%E5%8D%97/">Anaconda入门指南</a>》。</p>

<h2 id="参考文档">参考文档</h2>

<p><a href="https://github.com/ariddell/lda">官网文档</a></p>

<p><a href="http://pythonhosted.org/lda/">lda: Topic modeling with latent Dirichlet Allocation</a></p>

<p><a href="http://chrisstrelioff.ws/sandbox/2014/11/13/getting_started_with_latent_dirichlet_allocation_in_python.html">Getting started with Latent Dirichlet Allocation in Python - sandbox</a></p>

<h2 id="核心代码">核心代码</h2>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
</pre></td><td class="rouge-code"><pre><span class="c"># coding=utf-8</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="nn">matplotlib</span>
<span class="kn">import</span> <span class="nn">scipy</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">from</span> <span class="nn">sklearn</span> <span class="kn">import</span> <span class="n">feature_extraction</span>
<span class="kn">from</span> <span class="nn">sklearn.feature_extraction.text</span> <span class="kn">import</span> <span class="n">TfidfTransformer</span>
<span class="kn">from</span> <span class="nn">sklearn.feature_extraction.text</span> <span class="kn">import</span> <span class="n">CountVectorizer</span>
<span class="kn">from</span> <span class="nn">sklearn.feature_extraction.text</span> <span class="kn">import</span> <span class="n">HashingVectorizer</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">"__main__"</span><span class="p">:</span>

    <span class="c"># 存储读取语料 一行预料为一个文档</span>
    <span class="n">corpus</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">open</span><span class="p">(</span><span class="s">'test.txt'</span><span class="p">,</span> <span class="s">'r'</span><span class="p">)</span><span class="o">.</span><span class="n">readlines</span><span class="p">():</span>
        <span class="c"># print line</span>
        <span class="n">corpus</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
    <span class="c"># print corpus</span>

    <span class="c"># 将文本中的词语转换为词频矩阵 矩阵元素a[i][j] 表示j词在i类文本下的词频</span>
    <span class="n">vectorizer</span> <span class="o">=</span> <span class="n">CountVectorizer</span><span class="p">()</span>
    <span class="k">print</span> <span class="n">vectorizer</span>

    <span class="n">X</span> <span class="o">=</span> <span class="n">vectorizer</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">corpus</span><span class="p">)</span>
    <span class="n">analyze</span> <span class="o">=</span> <span class="n">vectorizer</span><span class="o">.</span><span class="n">build_analyzer</span><span class="p">()</span>
    <span class="n">weight</span> <span class="o">=</span> <span class="n">X</span><span class="o">.</span><span class="n">toarray</span><span class="p">()</span>

    <span class="k">print</span> <span class="nb">len</span><span class="p">(</span><span class="n">weight</span><span class="p">)</span>
    <span class="k">print</span> <span class="p">(</span><span class="n">weight</span><span class="p">[:</span><span class="mi">5</span><span class="p">,</span> <span class="p">:</span><span class="mi">5</span><span class="p">])</span>

    <span class="c"># LDA算法</span>
    <span class="k">print</span> <span class="s">'LDA:'</span>
    <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
    <span class="kn">import</span> <span class="nn">lda</span>
    <span class="kn">import</span> <span class="nn">lda.datasets</span>

    <span class="c"># 定义主题数量</span>
    <span class="n">n_topics</span> <span class="o">=</span> <span class="mi">2</span>
    <span class="c"># 定义迭代次数</span>
    <span class="n">n_iter</span> <span class="o">=</span> <span class="mi">500</span>
    <span class="n">model</span> <span class="o">=</span> <span class="n">lda</span><span class="o">.</span><span class="n">LDA</span><span class="p">(</span><span class="n">n_topics</span><span class="o">=</span><span class="n">n_topics</span><span class="p">,</span> <span class="n">n_iter</span><span class="o">=</span><span class="n">n_iter</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">model</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">weight</span><span class="p">))</span>  <span class="c"># model.fit_transform(X) is also available</span>
    <span class="c"># 主题-单词（topic-word）分布</span>
    <span class="n">topic_word</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">topic_word_</span>  <span class="c"># model.components_ also works</span>

    <span class="c"># 文档-主题（Document-Topic）分布</span>
    <span class="n">doc_topic</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">doc_topic_</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"type(doc_topic): {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">doc_topic</span><span class="p">)))</span>
    <span class="k">print</span><span class="p">(</span><span class="s">"shape: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">doc_topic</span><span class="o">.</span><span class="n">shape</span><span class="p">))</span>

    <span class="c"># 输出前10篇文章最可能的Topic</span>
    <span class="n">label</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
        <span class="n">topic_most_pr</span> <span class="o">=</span> <span class="n">doc_topic</span><span class="p">[</span><span class="n">n</span><span class="p">]</span><span class="o">.</span><span class="n">argmax</span><span class="p">()</span>
        <span class="n">label</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">topic_most_pr</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s">"doc: {} topic: {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">topic_most_pr</span><span class="p">))</span>

</pre></td></tr></tbody></table></code></pre></div></div>

<h2 id="代码分析">代码分析</h2>

<h3 id="输入输出">输入输出</h3>

<p>输入是test.txt文件，它是使用<a href="http://blog.csdn.net/eastmount/article/details/50256163">Jieba分词</a>之后的文本内容，通常每行代表一篇文档。该文本内容原自博客：<a href="http://blog.csdn.net/vs412237401/article/details/50628239">文本分析之TFIDF/LDA/Word2vec实践</a></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre>新春 备 年货 ， 新年 联欢晚会  
新春 节目单 ， 春节 联欢晚会 红火  
大盘 下跌 股市 散户  
下跌 股市 赚钱  
金猴 新春 红火 新年  
新车 新年 年货 新春  
股市 反弹 下跌  
股市 散户 赚钱  
新年 , 看 春节 联欢晚会  
大盘 下跌 散户
</pre></td></tr></tbody></table></code></pre></div></div>

<p>输出则是这十篇文档的主题分布，shape: (10, 2)表示10篇文档，2个主题。
具体结果如下所示：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
</pre></td><td class="rouge-code"><pre>type(doc_topic): &lt;type 'numpy.ndarray'&gt;
shape: (10, 2)
doc: 0 topic: 0
doc: 1 topic: 0
doc: 2 topic: 1
doc: 3 topic: 1
doc: 4 topic: 0
doc: 5 topic: 0
doc: 6 topic: 1
doc: 7 topic: 1
doc: 8 topic: 0
doc: 9 topic: 1
</pre></td></tr></tbody></table></code></pre></div></div>

<p>同时可以调用<code class="highlighter-rouge">matplotlib.pyplot</code>输出了对应的文档主题分布图，实现代码如下：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre>    <span class="c">#计算文档主题分布图  </span>
    <span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>    
    <span class="n">f</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span> <span class="mi">8</span><span class="p">),</span> <span class="n">sharex</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>    
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]):</span>    
        <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">stem</span><span class="p">(</span><span class="n">doc_topic</span><span class="p">[</span><span class="n">k</span><span class="p">,:],</span> <span class="n">linefmt</span><span class="o">=</span><span class="s">'r-'</span><span class="p">,</span>    
                   <span class="n">markerfmt</span><span class="o">=</span><span class="s">'ro'</span><span class="p">,</span> <span class="n">basefmt</span><span class="o">=</span><span class="s">'w-'</span><span class="p">)</span>    
        <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>     <span class="c">#x坐标下标  </span>
        <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">1.2</span><span class="p">)</span>    <span class="c">#y坐标下标  </span>
        <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">"Prob"</span><span class="p">)</span>    
        <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">"Document {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">k</span><span class="p">))</span>    
    <span class="n">ax</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">"Topic"</span><span class="p">)</span>  
    <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>  
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>    
</pre></td></tr></tbody></table></code></pre></div></div>

<p>可以看到主题Doc0、Doc1、Doc8分布于Topic0，它们主要描述主题新春；而Doc2、Doc3、Doc9分布于Topic1，主要描述股市。</p>

<p><img src="https://ws1.sinaimg.cn/large/006MzNVDgy1fr8f62cg7nj318g18g405.jpg" alt="" />LDA运行结果如下：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre></td><td class="rouge-code"><pre>INFO:lda:n_documents: 10	#文档数
INFO:lda:vocab_size: 15		
INFO:lda:n_words: 36		#总词数
INFO:lda:n_topics: 2		#话题数
INFO:lda:n_iter: 500		#迭代次数
INFO:lda:&lt;0&gt; log likelihood: -192
INFO:lda:&lt;10&gt; log likelihood: -140
……
</pre></td></tr></tbody></table></code></pre></div></div>

<p>如果希望查询每个主题对应的问题词权重分布情况，代码实现如下：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
</pre></td><td class="rouge-code"><pre><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>    
<span class="n">f</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span> <span class="n">sharex</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>    
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">k</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]):</span>         <span class="c">#两个主题  </span>
    <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">stem</span><span class="p">(</span><span class="n">topic_word</span><span class="p">[</span><span class="n">k</span><span class="p">,:],</span> <span class="n">linefmt</span><span class="o">=</span><span class="s">'b-'</span><span class="p">,</span>    
               <span class="n">markerfmt</span><span class="o">=</span><span class="s">'bo'</span><span class="p">,</span> <span class="n">basefmt</span><span class="o">=</span><span class="s">'w-'</span><span class="p">)</span>    
    <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">20</span><span class="p">)</span>    
    <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylim</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>    
    <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s">"Prob"</span><span class="p">)</span>    
    <span class="n">ax</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s">"topic {}"</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">k</span><span class="p">))</span>    
    
<span class="n">ax</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s">"word"</span><span class="p">)</span>    
    
<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>    
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>  
</pre></td></tr></tbody></table></code></pre></div></div>

<p>运行结果如下图所示，共2个主题Topics，15个核心词汇。</p>

<p><img src="https://ws1.sinaimg.cn/large/006MzNVDgy1fr8fqb5wj6j30xc0xcwfj.jpg" alt="" /></p>

<h3 id="计算主题topn">计算主题TopN</h3>

<p>通过word = vectorizer.get_feature_names()获取整个预料的词向量，其中TF-IDF对应的就是它的值。然后再获取其位置对应的关键词即可，代码中输出5个关键词，代码实现如下：</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre></td><td class="rouge-code"><pre>    <span class="c"># 输出主题中的TopN关键词</span>
    <span class="n">word</span> <span class="o">=</span> <span class="n">vectorizer</span><span class="o">.</span><span class="n">get_feature_names</span><span class="p">()</span>
    <span class="k">for</span> <span class="n">w</span> <span class="ow">in</span> <span class="n">word</span><span class="p">:</span>
        <span class="k">print</span> <span class="n">w</span>
    <span class="k">print</span> <span class="n">topic_word</span><span class="p">[:,</span> <span class="p">:</span><span class="mi">3</span><span class="p">]</span>
    <span class="c"># 获取每个topic下权重最高的n个单词</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">5</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">topic_dist</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">topic_word</span><span class="p">):</span>
        <span class="n">topic_words</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">word</span><span class="p">)[</span><span class="n">np</span><span class="o">.</span><span class="n">argsort</span><span class="p">(</span><span class="n">topic_dist</span><span class="p">)][:</span><span class="o">-</span><span class="p">(</span><span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">print</span><span class="p">(</span><span class="s">u'*Topic {}</span><span class="se">\n</span><span class="s">- {}'</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="s">' '</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">topic_words</span><span class="p">)))</span>
</pre></td></tr></tbody></table></code></pre></div></div>

<p>运行结果如下所示：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
</pre></td><td class="rouge-code"><pre>下跌 反弹 大盘 年货 散户 新年 新春 新车 春节 红火 联欢晚会 股市 节目单 赚钱 金猴
[[ 0.00049628  0.00049628  0.00049628]
 [ 0.24829721  0.0625387   0.1244582 ]]
*Topic 0
- 新春 新年 联欢晚会 红火 春节
*Topic 1
- 股市 下跌 散户 赚钱 大盘
</pre></td></tr></tbody></table></code></pre></div></div>

<h3 id="tf-idf计算及词频tf计算">TF-IDF计算及词频TF计算</h3>

<p>特征计算方法参考：<a href="http://scikit-learn.org/stable/modules/feature_extraction.html#text-feature-extraction">Feature Extraction - scikit-learn</a></p>

<p>代码实现如下：</p>

<pre><code class="language-Python">    #计算TFIDF
    corpus = []
    
    #读取预料 一行预料为一个文档 
    for line in open('test.txt', 'r').readlines():
        #print line
        corpus.append(line.strip())
    #print corpus
    
    #将文本中的词语转换为词频矩阵 矩阵元素a[i][j] 表示j词在i类文本下的词频
    vectorizer = CountVectorizer()

    #该类会统计每个词语的tf-idf权值
    transformer = TfidfTransformer()

    #第一个fit_transform是计算tf-idf 第二个fit_transform是将文本转为词频矩阵
    tfidf = transformer.fit_transform(vectorizer.fit_transform(corpus))

    #获取词袋模型中的所有词语  
    word = vectorizer.get_feature_names()

    #将tf-idf矩阵抽取出来，元素w[i][j]表示j词在i类文本中的tf-idf权重
    weight = tfidf.toarray()

    #打印特征向量文本内容
    print 'Features length: ' + str(len(word))
    for j in range(len(word)):
        print word[j]

    #打印每类文本的tf-idf词语权重，第一个for遍历所有文本，第二个for便利某一类文本下的词语权重  
    for i in range(len(weight)):
        for j in range(len(word)):
            print weight[i][j],
        print '\n'
</code></pre>

<p>输出如下图所示，共统计处特征词15个，对应TF-IDF矩阵，共10行数据对应txt文件中的10个文档，每个文档15维数据，存储TF-IDF权重，这就可以通过10*15的矩阵表示整个文档权重信息。运行结果如下所示：</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre></td><td class="rouge-code"><pre>Features length: 15  
下跌 反弹 大盘 年货 散户 新年 新春 新车 春节 红火 联欢晚会 股市 节目单 赚钱 金猴  
  
0.0 0.0 0.0 0.579725686076 0.0 0.450929562568 0.450929562568 0.0 0.0 0.0 0.507191470855 0.0 0.0 0.0 0.0   
0.0 0.0 0.0 0.0 0.0 0.0 0.356735384792 0.0 0.458627428458 0.458627428458 0.401244805261 0.0 0.539503693426 0.0 0.0   
0.450929562568 0.0 0.579725686076 0.0 0.507191470855 0.0 0.0 0.0 0.0 0.0 0.0 0.450929562568 0.0 0.0 0.0   
0.523221265036 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.523221265036 0.0 0.672665604612 0.0   
0.0 0.0 0.0 0.0 0.0 0.410305398084 0.410305398084 0.0 0.0 0.52749830162 0.0 0.0 0.0 0.0 0.620519542315  
0.0 0.0 0.0 0.52749830162 0.0 0.410305398084 0.410305398084 0.620519542315 0.0 0.0 0.0 0.0 0.0 0.0 0.0  
0.482964462575 0.730404446714 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.482964462575 0.0 0.0 0.0   
0.0 0.0 0.0 0.0 0.568243852685 0.0 0.0 0.0 0.0 0.0 0.0 0.505209504985 0.0 0.649509260872 0.0   
0.0 0.0 0.0 0.0 0.0 0.505209504985 0.0 0.0 0.649509260872 0.0 0.568243852685 0.0 0.0 0.0 0.0   
0.505209504985 0.0 0.649509260872 0.0 0.568243852685 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0 0.0   
</pre></td></tr></tbody></table></code></pre></div></div>

<p><strong>感谢来自北京理工大学的杨秀璋同学，现任教于贵州财经大学信息学院；感谢陈炳宏同学的数据</strong>。</p>

<h2 id="附录">附录</h2>

<h4 id="微博热点话题检测运行结果">微博热点话题检测运行结果</h4>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
69
70
71
72
73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
</pre></td><td class="rouge-code"><pre>[[  1.02084567e-05   1.02084567e-05   1.02084567e-05]
 [  3.01539200e-03   1.50019503e-05   1.50019503e-05]
 [  1.52304365e-05   1.52304365e-05   1.52304365e-05]
 [  1.22013714e-05   1.22013714e-05   1.22013714e-05]
 [  1.49570732e-05   1.49570732e-05   1.49570732e-05]
 [  1.35947144e-05   1.35947144e-05   1.35947144e-05]
 [  1.30110073e-05   2.61521247e-03   1.30110073e-05]
 [  1.32173729e-05   1.32173729e-05   1.32173729e-05]
 [  1.27456728e-05   1.27456728e-05   1.27456728e-05]
 [  9.43770173e-06   9.43770173e-06   9.43770173e-06]
 [  1.49570732e-05   1.49570732e-05   1.49570732e-05]
 [  1.22013714e-05   1.22013714e-05   1.22013714e-05]
 [  1.16335885e-05   1.16335885e-05   1.16335885e-05]
 [  1.12539107e-05   1.12539107e-05   1.12539107e-05]
 [  1.41526791e-05   1.41526791e-05   1.41526791e-05]
 [  1.33230302e-05   1.33230302e-05   1.33230302e-05]
 [  1.55865208e-05   1.55865208e-05   1.55865208e-05]
 [  1.30790761e-05   1.30790761e-05   1.30790761e-05]
 [  9.89530765e-06   9.89530765e-06   9.89530765e-06]
 [  1.24909441e-05   1.24909441e-05   1.24909441e-05]
 [  1.28274199e-05   1.28274199e-05   1.28274199e-05]
 [  1.34665625e-05   1.34665625e-05   1.34665625e-05]
 [  1.22612129e-05   1.22612129e-05   1.22612129e-05]
 [  1.24134164e-05   1.24134164e-05   1.24134164e-05]
 [  1.39746779e-05   1.39746779e-05   1.39746779e-05]
 [  1.55865208e-05   1.55865208e-05   1.55865208e-05]
 [  1.53473096e-05   1.53473096e-05   1.53473096e-05]
 [  1.35211877e-05   1.35211877e-05   1.35211877e-05]
 [  1.35578514e-05   1.35578514e-05   1.35578514e-05]
 [  1.33586257e-05   1.33586257e-05   1.33586257e-05]
 [  1.42130248e-05   1.42130248e-05   1.42130248e-05]
 [  1.14079719e-05   1.14079719e-05   1.14079719e-05]
 [  1.13432700e-05   1.13432700e-05   1.13432700e-05]
 [  1.44805815e-05   1.44805815e-05   4.35865504e-03]
 [  1.53473096e-05   1.53473096e-05   1.53473096e-05]
 [  9.41105611e-06   9.41105611e-06   9.41105611e-06]
 [  1.32876239e-05   1.32876239e-05   1.32876239e-05]
 [  1.12286375e-05   1.12286375e-05   1.12286375e-05]
 [  1.40928437e-05   1.40928437e-05   1.40928437e-05]
 [  1.30962047e-05   1.30962047e-05   1.30962047e-05]]
*Topic 0
- 男子 打人 黑衣 发生 外卖 小哥
*Topic 1
- 医院 沙溢 城市 男孩 牙齿 心疼
*Topic 2
- 大风 孩子 女孩 小姐姐 一把 一点
*Topic 3
- 发布 购物 发现 实施 第一 卖场
*Topic 4
- 马克思 纪念 转发 求婚 收藏 大学生
*Topic 5
- 世界 生活 努力 可怕 患者 低于
*Topic 6
- 香港 日本 创新 疫苗 永远 刚果
*Topic 7
- 男子 山东 驾车 网友 路边 网络
*Topic 8
- 帕尔马 联赛 意甲 年月日 三年 恭喜
*Topic 9
- 篮球 赛季 季后赛 比赛 训练 勇士
*Topic 10
- 公司 男友 手机 分享 快递 图片
*Topic 11
- 一名 司机 货车 发现 女童 幸福
*Topic 12
- 药酒 道歉 秦东 女生 声明 医生
*Topic 13
- 顺丰 出售 教师 用户 宿舍 司机
*Topic 14
- 电影 复仇者 联盟 复联 灭霸 漫威
*Topic 15
- 孩子 父母 高温 朋友 转盘 十级
*Topic 16
- 租赁 警方 住房 记者 成都 市场
*Topic 17
- 书记 春风 事件 调查 广安 市委
*Topic 18
- 执法 警察 网友 教科书 操作 连续
*Topic 19
- 小时 生气 加班 事情 相当于 致命
*Topic 20
- 事故 武汉 身边 新闻 调查 死亡
*Topic 21
- 老人 司机 科技 网友 地方 刺激
*Topic 22
- 搞笑 幸福 一种 联想 红人周 喜欢
*Topic 23
- 美国 学生 高中 发生 国家 警方
*Topic 24
- 兰州 甘肃 惊喜 新区 集团 梦想
*Topic 25
- 真的 工作 教师资格 曝光 特别 舞蹈
*Topic 26
- 北京 猫咪 专辑 轮胎 这是 一张
*Topic 27
- 员工 老板 一场 哈哈哈 宝马 豪宅
*Topic 28
- 中国 小龙虾 德约 地区 科维奇 中方
*Topic 29
- 上海 明星 现身 粉丝 春天 颜值
*Topic 30
- 中国 规则 广州 无物 转发 维和
*Topic 31
- 保姆 野生 莫焕晶 纵火案 现场 一审
*Topic 32
- 足球 俱乐部 球员 世界杯 比赛 孩子
*Topic 33
- 王源 戛纳 电影节 主宰 礼物 喝水
*Topic 34
- 故事 链接 网页 流量 手机 发布
*Topic 35
- 古巴 乘客 坠毁 客机 遇难 时间
*Topic 36
- 母亲 女儿 儿子 赡养 支持 财产
*Topic 37
- 英雄 近日 烈士 暴走 孩子 中国
*Topic 38
- 活动 表情 真的 生活 警方 一部
*Topic 39
- 突发 丈夫 民警 急救 心梗 医生
type(doc_topic): &lt;type 'numpy.ndarray'&gt;
shape: (1943, 40)
doc: 0 topic: 37
doc: 1 topic: 31
doc: 2 topic: 25
doc: 3 topic: 30
doc: 4 topic: 38
doc: 5 topic: 17
doc: 6 topic: 18
doc: 7 topic: 6
doc: 8 topic: 29
doc: 9 topic: 24
</pre></td></tr></tbody></table></code></pre></div></div>

<h4 id="文档主题分布图">文档主题分布图</h4>

<p><img src="https://ws1.sinaimg.cn/large/006MzNVDly1frkgischgzj30m80m8t96.jpg" alt="" /></p>

<h4 id="主题对应的问题词权重分布情况图">主题对应的问题词权重分布情况图</h4>

<p><img src="https://ws1.sinaimg.cn/large/006MzNVDgy1frkg1taeagj30go0goglv.jpg" alt="" /></p>


                <hr style="visibility: hidden;">
                <ul class="pager">
                    
                    <li class="previous">
                        <a href="/2018/02/12/%E4%BD%BF%E7%94%A8RVM%E5%AF%B9Ruby%E8%BF%9B%E8%A1%8C%E5%A4%9A%E7%89%88%E6%9C%AC%E7%AE%A1%E7%90%86/" data-toggle="tooltip" data-placement="top" title="使用RVM对Ruby进行多版本管理">
                        Previous<br>
                        <span>使用RVM对Ruby进行多版本管理</span>
                        </a>
                    </li>
                    
                    
                    <li class="next">
                        <a href="/2018/05/27/MySQL%E5%AE%89%E5%85%A8%E8%AE%BE%E7%BD%AE%E5%91%BD%E4%BB%A4mysql_secure_installation/" data-toggle="tooltip" data-placement="top" title="MySQL安全设置命令mysql_secure_installation">
                        Next<br>
                        <span>MySQL安全设置命令mysql_secure_installation</span>
                        </a>
                    </li>
                    
                </ul>
                <hr style="visibility: hidden;">

                

            </div>  

    <!-- Side Catalog Container -->
        
            <div class="
                col-lg-2 col-lg-offset-0
                visible-lg-block
                sidebar-container
                catalog-container">
                <div class="side-catalog">
                    <hr class="hidden-sm hidden-xs">
                    <h5>
                        <a class="catalog-toggle" href="#">CATALOG</a>
                    </h5>
                    <ul class="catalog-body"></ul>
                </div>
            </div>
        

    <!-- Sidebar Container -->
            <div class="
                col-lg-8 col-lg-offset-2
                col-md-10 col-md-offset-1
                sidebar-container">

                <!-- Featured Tags -->
                


<section>
    
        <hr class="hidden-sm hidden-xs">
    
    <h5><a href="/archive/">FEATURED TAGS</a></h5>
    <div class="tags">
        
        
        
        </a>
        
        
                <a data-sort="0005" 
                    href="/archive/?tag=Python"
                    title="Python"
                    rel="2">Python</a>
        
                <a data-sort="0005" 
                    href="/archive/?tag=Ruby"
                    title="Ruby"
                    rel="2">Ruby
    </div>
</section>


                <!-- Friends Blog -->
                
<hr>
<h5>FRIENDS</h5>
<ul class="list-inline">
  
  <li><a href="https://blog.csdn.net/BYS_PrintF_/">一只朴素的贝叶斯</a></li>
  
  <li><a href=""></a></li>
  
</ul>

            </div>
        </div>
    </div>
</article>

<!-- add support for mathjax by voleking-->







<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>
<!-- anchor-js, Doc:http://bryanbraun.github.io/anchorjs/ -->
<script>
    async("//cdnjs.cloudflare.com/ajax/libs/anchor-js/1.1.1/anchor.min.js",function(){
        anchors.options = {
          visible: 'always',
          placement: 'right',
          icon: '#'
        };
        anchors.add().remove('.intro-header h1').remove('.subheading').remove('.sidebar-container h5');
    })
</script>
<style>
    /* place left on bigger screen */
    @media all and (min-width: 800px) {
        .anchorjs-link{
            position: absolute;
            left: -0.75em;
            font-size: 1.1em;
            margin-top : -0.1em;
        }
    }
</style>



    <!-- Footer -->
<footer>
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                <!-- SNS Link -->
                


<ul class="list-inline text-center">


  
  
  
  <li>
      <a target="_blank" href="http://music.163.com/user/home?id=287462241">
          <span class="fa-stack fa-lg">
              <i class="fa fa-circle fa-stack-2x"></i>
              <i class="fa fa-music fa-stack-1x fa-inverse"></i>
          </span>
      </a>
  </li>
  
  
  
  <li>
    <a target="_blank" href="http://weibo.com/u/6214594529">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-weibo fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
  
  
  <li>
    <a target="_blank" href="https://github.com/mal-suen">
      <span class="fa-stack fa-lg">
        <i class="fa fa-circle fa-stack-2x"></i>
        <i class="fa fa-github fa-stack-1x fa-inverse"></i>
      </span>
    </a>
  </li>
  
  
  <li>
      <a target="_blank" href="mailto:malcolmsuen@gmail.com">
          <span class="fa-stack fa-lg">
              <i class="fa fa-circle fa-stack-2x"></i>
              <i class="fa fa-envelope-o fa-stack-1x fa-inverse"></i>
          </span>
      </a>
  </li>
  
  
</ul>


                <p class="copyright text-muted">
                    Copyright &copy; Malcolm`s Blog 2018
                </p>
            </div>
        </div>
    </div>
</footer>

<!-- jQuery -->
<script src="/js/jquery.min.js "></script>

<!-- Bootstrap Core JavaScript -->
<!-- Currently, only navbar scroll-down effect at desktop still depends on this -->
<script src="/js/bootstrap.min.js "></script>

<!-- Custom Theme JavaScript -->
<script src="/js/hux-blog.min.js "></script>

<!-- Service Worker -->

<script src="/js/snackbar.js "></script>
<script src="/js/sw-registration.js "></script>


<!-- async load function -->
<script>
    function async(u, c) {
      var d = document, t = 'script',
          o = d.createElement(t),
          s = d.getElementsByTagName(t)[0];
      o.src = u;
      if (c) { o.addEventListener('load', function (e) { c(null, e); }, false); }
      s.parentNode.insertBefore(o, s);
    }
</script>

<!--
     Because of the native support for backtick-style fenced code blocks
     right within the Markdown is landed in Github Pages,
     From V1.6, There is no need for Highlight.js,
     so Huxblog drops it officially.

     - https://github.com/blog/2100-github-pages-now-faster-and-simpler-with-jekyll-3-0
     - https://help.github.com/articles/creating-and-highlighting-code-blocks/
     - https://github.com/jneen/rouge/wiki/list-of-supported-languages-and-lexers
-->
<!--
    <script>
        async("http://cdn.bootcss.com/highlight.js/8.6/highlight.min.js", function(){
            hljs.initHighlightingOnLoad();
        })
    </script>
    <link href="http://cdn.bootcss.com/highlight.js/8.6/styles/github.min.css" rel="stylesheet">
-->





<!--fastClick.js -->
<script>
    async("//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js", function(){
        var $nav = document.querySelector("nav");
        if($nav) FastClick.attach($nav);
    })
</script>


<!-- Google Analytics -->



<!-- Baidu Tongji -->



<!-- Side Catalog -->

<script type="text/javascript">
    function generateCatalog (selector) {

        // interop with multilangual 
        if ('' == 'true') {
            _containerSelector = 'div.post-container.active'
        } else {
            _containerSelector = 'div.post-container'
        }

        // init
        var P = $(_containerSelector),a,n,t,l,i,c;
        a = P.find('h1,h2,h3,h4,h5,h6');

        // clean
        $(selector).html('')

        // appending
        a.each(function () {
            n = $(this).prop('tagName').toLowerCase();
            i = "#"+$(this).prop('id');
            t = $(this).text();
            c = $('<a href="'+i+'" rel="nofollow">'+t+'</a>');
            l = $('<li class="'+n+'_nav"></li>').append(c);
            $(selector).append(l);
        });
        return true;
    }

    generateCatalog(".catalog-body");

    // toggle side catalog
    $(".catalog-toggle").click((function(e){
        e.preventDefault();
        $('.side-catalog').toggleClass("fold")
    }))

    /*
     * Doc: https://github.com/davist11/jQuery-One-Page-Nav
     * Fork by Hux to support padding
     */
    async("/js/jquery.nav.js", function () {
        $('.catalog-body').onePageNav({
            currentClass: "active",
            changeHash: !1,
            easing: "swing",
            filter: "",
            scrollSpeed: 700,
            scrollOffset: 0,
            scrollThreshold: .2,
            begin: null,
            end: null,
            scrollChange: null,
            padding: 80
        });
    });
</script>



<!-- Multi-Lingual -->



</body>

</html>
